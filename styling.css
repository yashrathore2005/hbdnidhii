:root{
    --bg1:#0f0c29; --bg2:#302b63; --bg3:#24243e;
    --accent:#ff6b81; --accent2:#ffd1dc; --white:#ffffff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Poppins,Arial}
  body{
    color:var(--white);
    background: radial-gradient(1100px 700px at 10% 10%, #1b1b38 0%, #111028 55%, #0b0a18 100%),
                linear-gradient(120deg,var(--bg1),var(--bg2),var(--bg3));
    overflow:hidden;
  }

  /* ===== Background particles (canvas under everything) ===== */
  #fx{
    position:fixed; inset:0; z-index:0; pointer-events:none;
  }

  /* ===== Header / Title ===== */
  .layer{position:relative; z-index:2}
  header{
    position:fixed; top:22px; left:50%; transform:translateX(-50%);
    text-align:center; z-index:3; width:min(92%,1000px);
  }
  h1{
    margin:0; font-weight:800; letter-spacing:1px;
    font-size:clamp(24px,5vw,44px);
    text-shadow:0 0 12px rgba(255,107,129,.7), 0 0 28px rgba(255,107,129,.35);
  }
  .sub{
    margin-top:6px;
    font-size:clamp(14px,2.4vw,18px);
    opacity:.95;
    white-space:nowrap; overflow:hidden; border-right:2px solid rgba(255,255,255,.7);
    width:0; 
    animation:typing 6s steps(36) 1s forwards, caret .9s step-end infinite;
  }
  @keyframes typing{from{width:0} to{width:100%}}
  @keyframes caret{50%{border-color:transparent}}

  /* ===== Controls bar ===== */
  .controls{
    position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
    display:flex; gap:10px; align-items:center; z-index:3;
    background:rgba(255,255,255,.08); padding:10px 14px; border-radius:999px;
    backdrop-filter: blur(6px);
    box-shadow:0 6px 24px rgba(0,0,0,.35);
  }
  .btn{
    border:none; outline:none; cursor:pointer;
    padding:10px 14px; border-radius:999px; font-weight:600;
    color:#0a0a16; background:var(--accent2);
  }
  .btn.secondary{ background:#faf8ff; }
  .btn:active{ transform:translateY(1px) }
  .range{appearance:none; width:160px; height:6px; border-radius:999px; background:rgba(255,255,255,.25); outline:none}
  .range::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent);cursor:pointer}
  .small{font-size:12px;opacity:.8}

  /* ===== 3D Stage ===== */
  .stage{
    position:fixed; inset:0; display:grid; place-items:center; z-index:2;
    perspective: 1400px;
  }
  .ring-wrap{
    width:min(90vmin,720px); height:min(90vmin,720px);
    position:relative;
    transform-style:preserve-3d;
  }
  .ring{
    position:absolute; inset:0; transform-style:preserve-3d;
    transition: transform .45s cubic-bezier(.22,.61,.36,1);
  }
  .ph{
    position:absolute; left:50%; top:50%;
    width: clamp(120px, 16vmin, 210px);
    height: clamp(120px, 16vmin, 210px);
    transform-style:preserve-3d;
    transform-origin:center center -400px;
    border-radius:22px;
    overflow:hidden; border:3px solid rgba(255,255,255,.85);
    box-shadow: 0 10px 30px rgba(0,0,0,.55), inset 0 0 0 1px rgba(255,255,255,.12);
    background:#131325;
  }
  .ph img{
    width:100%; height:100%; object-fit:cover; display:block;
    transform:translateZ(1px);
  }
  .ph::after{
    /* subtle glass sheen */
    content:""; position:absolute; inset:0;
    background: linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,0) 40% 70%, rgba(0,0,0,.25));
    pointer-events:none;
  }
  .ph:hover{ transform: translateZ(20px) scale(1.06) !important; z-index:10 }

  /* soft vignette */
  .vignette{
    position:fixed; inset:-20%; pointer-events:none; z-index:1;
    background: radial-gradient(60% 60% at 50% 60%, transparent 60%, rgba(0,0,0,.35) 100%);
  }

  /* Confetti pieces */
  .confetti{
    position:fixed; width:10px; height:14px; top:-20px; z-index:5; opacity:.85;
    will-change: transform;
  }

  /* Responsive tweaks */
  @media (max-width:520px){
    .controls{ gap:8px }
    .range{ width:120px }
  }